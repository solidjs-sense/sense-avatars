const g={};function Y(e){g.context=e}const Xe=(e,t)=>e===t,We=Symbol("solid-proxy"),ee={equals:Xe};let N=null,Le=Ne;const I={},U=1,te=2,Re={owned:null,cleanups:null,context:null,owner:null};var d=null;let X=null,m=null,H=null,S=null,L=null,fe=0;function Qe(e,t){const n=m,s=d,o=e.length===0?Re:{owned:null,cleanups:null,context:null,owner:t||s};d=o,m=null;try{return de(()=>e(()=>pe(o)),!0)}finally{m=n,d=s}}function x(e,t){t=t?Object.assign({},ee,t):ee;const n={value:e,observers:null,observerSlots:null,pending:I,comparator:t.equals||void 0},s=o=>(typeof o=="function"&&(o=o(n.pending!==I?n.pending:n.value)),he(n,o));return[ke.bind(n),s]}function re(e,t,n){const s=se(e,t,!0,U);q(s)}function j(e,t,n){const s=se(e,t,!1,U);q(s)}function Ae(e,t,n){Le=nt;const s=se(e,t,!1,U);s.user=!0,L?L.push(s):queueMicrotask(()=>q(s))}function $(e,t,n){n=n?Object.assign({},ee,n):ee;const s=se(e,t,!0,0);return s.pending=I,s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,q(s),ke.bind(s)}function Ye(e,t,n){arguments.length===2?typeof t=="object"&&(n=t,t=e,e=!0):arguments.length===1&&(t=e,e=!0),n||(n={}),n.globalRefetch!==!1&&(J||(J=new Set),J.add(G),d&&W(()=>J.delete(G)));const s=new Set,[o,r]=x(n.initialValue),[l,i]=x(void 0,{equals:!1}),[c,f]=x(!1),[u,w]=x();let y,h=null,E=null,R=null,k=!1,p=typeof e=="function";g.context&&(R=`${g.context.id}${g.context.count++}`,g.load&&(E=g.load(R)));function a(C,v,P,B){return h===C&&(h=null,E&&C===E&&n.onHydrated&&n.onHydrated(B,{value:v}),E=null,w(y=P),A(v)),v}function A(C){O(()=>{r(()=>C),f(!1);for(const v of s.keys())v.decrement();s.clear()})}function M(){const C=ze,v=o();if(y)throw y;return m&&!m.user&&C&&re(()=>{l(),h&&(C.resolved||s.has(C)||(C.increment(),s.add(C)))}),v}function G(C=!0){if(C&&k)return;k=!1,w(y=void 0);const v=p?e():e;if(v==null||v===!1){a(h,T(o));return}const P=E||T(()=>t(v,{value:o(),refetching:C}));return typeof P!="object"||!("then"in P)?(a(h,P),P):(h=P,k=!0,queueMicrotask(()=>k=!1),O(()=>{f(!0),i()}),P.then(B=>a(P,B,void 0,v),B=>a(P,B,B)))}return Object.defineProperties(M,{loading:{get(){return c()}},error:{get(){return u()}}}),p?re(()=>G(!1)):G(!1),[M,{refetch:G,mutate:r}]}let J;function O(e){if(H)return e();let t;const n=H=[];try{t=e()}finally{H=null}return de(()=>{for(let s=0;s<n.length;s+=1){const o=n[s];if(o.pending!==I){const r=o.pending;o.pending=I,he(o,r)}}},!1),t}function T(e){let t,n=m;return m=null,t=e(),m=n,t}function W(e){return d===null||(d.cleanups===null?d.cleanups=[e]:d.cleanups.push(e)),e}function Je(e){N||(N=Symbol("error")),d===null||(d.context===null?d.context={[N]:[e]}:d.context[N]?d.context[N].push(e):d.context[N]=[e])}function $e(e){const t=Symbol("context");return{id:t,Provider:st(t),defaultValue:e}}function ae(e){let t;return(t=ge(d,e.id))!==void 0?t:e.defaultValue}function Ze(e){const t=$(e);return $(()=>ie(t()))}let ze;function ke(){const e=X;if(this.sources&&(this.state||e)){const t=S;S=null,this.state===U||e?q(this):ne(this),S=t}if(m){const t=this.observers?this.observers.length:0;m.sources?(m.sources.push(this),m.sourceSlots.push(t)):(m.sources=[this],m.sourceSlots=[t]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])}return this.value}function he(e,t,n){if(H)return e.pending===I&&H.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let s=!1;return e.value=t,e.observers&&e.observers.length&&de(()=>{for(let o=0;o<e.observers.length;o+=1){const r=e.observers[o];s&&X.disposed.has(r),(s&&!r.tState||!s&&!r.state)&&(r.pure?S.push(r):L.push(r),r.observers&&Oe(r)),s||(r.state=U)}if(S.length>1e6)throw S=[],new Error},!1),t}function q(e){if(!e.fn)return;pe(e);const t=d,n=m,s=fe;m=d=e,et(e,e.value,s),m=n,d=t}function et(e,t,n){let s;try{s=e.fn(t)}catch(o){Te(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?he(e,s):e.value=s,e.updatedAt=n)}function se(e,t,n,s=U,o){const r={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:d,context:null,pure:n};return d===null||d!==Re&&(d.owned?d.owned.push(r):d.owned=[r]),r}function V(e){const t=X;if(e.state===0||t)return;if(e.state===te||t)return ne(e);if(e.suspense&&T(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<fe);)(e.state||t)&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===U||t)q(e);else if(e.state===te||t){const o=S;S=null,ne(e,n[0]),S=o}}function de(e,t){if(S)return e();let n=!1;t||(S=[]),L?n=!0:L=[],fe++;try{return e()}catch(s){Te(s)}finally{tt(n)}}function tt(e){S&&(Ne(S),S=null),!e&&(L.length?O(()=>{Le(L),L=null}):L=null)}function Ne(e){for(let t=0;t<e.length;t++)V(e[t])}function nt(e){let t,n=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[n++]=o:V(o)}const s=e.length;for(t=0;t<n;t++)V(e[t]);for(t=s;t<e.length;t++)V(e[t])}function ne(e,t){const n=X;e.state=0;for(let s=0;s<e.sources.length;s+=1){const o=e.sources[s];o.sources&&(o.state===U||n?o!==t&&V(o):(o.state===te||n)&&ne(o,t))}}function Oe(e){const t=X;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(!s.state||t)&&(s.state=te,s.pure?S.push(s):L.push(s),s.observers&&Oe(s))}}function pe(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const r=o.pop(),l=n.observerSlots.pop();s<o.length&&(r.sourceSlots[l]=s,o[s]=r,n.observerSlots[s]=l)}}if(e.owned){for(t=0;t<e.owned.length;t++)pe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Te(e){const t=N&&ge(d,N);if(!t)throw e;t.forEach(n=>n(e))}function ge(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:ge(e.owner,t):void 0}function ie(e){if(typeof e=="function"&&!e.length)return ie(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=ie(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function st(e){return function(n){let s;return re(()=>s=T(()=>(d.context={[e]:n.value},Ze(()=>n.children)))),s}}function K(e,t){return T(()=>e(t))}function Z(){return!0}const Ue={get(e,t,n){return t===We?n:e.get(t)},has(e,t){return e.has(t)},set:Z,deleteProperty:Z,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Z,deleteProperty:Z}},ownKeys(e){return e.keys()}};function oe(e){return typeof e=="function"?e():e}function ot(...e){return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const s=oe(e[n])[t];if(s!==void 0)return s}},has(t){for(let n=e.length-1;n>=0;n--)if(t in oe(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(oe(e[n])));return[...new Set(t)]}},Ue)}function Me(e,...t){const n=new Set(t.flat()),s=Object.getOwnPropertyDescriptors(e),o=t.map(r=>{const l={};for(let i=0;i<r.length;i++){const c=r[i];Object.defineProperty(l,c,s[c]?s[c]:{get(){return e[c]},set(){return!0}})}return l});return o.push(new Proxy({get(r){return n.has(r)?void 0:e[r]},has(r){return n.has(r)?!1:r in e},keys(){return Object.keys(e).filter(r=>!n.has(r))}},Ue)),o}function Mt(e){let t,n;const s=o=>{const r=g.context;if(r){const[i,c]=x();(n||(n=e())).then(f=>{Y(r),c(()=>f.default),Y()}),t=i}else if(t){const i=t();if(i)return i(o)}else{const[i]=Ye(()=>(n||(n=e())).then(c=>c.default),{globalRefetch:!1});t=i}let l;return $(()=>(l=t())&&T(()=>{if(!r)return l(o);const i=g.context;Y(r);const c=l(o);return Y(i),c}))};return s.preload=()=>n||((n=e()).then(o=>t=()=>o.default),n),s}let z;function rt(e){let t;g.context&&g.load&&(t=g.load(g.context.id+g.context.count));const[n,s]=x(t);z||(z=new Set),z.add(s),W(()=>z.delete(s));let o;return $(()=>{if((o=n())!=null){const r=e.fallback;return typeof r=="function"&&r.length?T(()=>r(o,()=>s(null))):r}return Je(s),e.children})}const it=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],lt=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...it]),ct=new Set(["innerHTML","textContent","innerText","children"]),ut={className:"class",htmlFor:"for"},Se={class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"},ft=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),at=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),ht={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function dt(e,t,n){let s=n.length,o=t.length,r=s,l=0,i=0,c=t[o-1].nextSibling,f=null;for(;l<o||i<r;){if(t[l]===n[i]){l++,i++;continue}for(;t[o-1]===n[r-1];)o--,r--;if(o===l){const u=r<s?i?n[i-1].nextSibling:n[r-i]:c;for(;i<r;)e.insertBefore(n[i++],u)}else if(r===i)for(;l<o;)(!f||!f.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[r-1]&&n[i]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[i++],t[l++].nextSibling),e.insertBefore(n[--r],u),t[o]=n[r]}else{if(!f){f=new Map;let w=i;for(;w<r;)f.set(n[w],w++)}const u=f.get(t[l]);if(u!=null)if(i<u&&u<r){let w=l,y=1,h;for(;++w<o&&w<r&&!((h=f.get(t[w]))==null||h!==u+y);)y++;if(y>u-i){const E=t[l];for(;i<u;)e.insertBefore(n[i++],E)}else e.replaceChild(n[i++],t[l++])}else l++;else t[l++].remove()}}}const xe="_$DX_DELEGATE";function jt(e,t,n){let s;return Qe(o=>{s=o,t===document?e():_e(t,e(),t.firstChild?null:void 0,n)}),()=>{s(),t.textContent=""}}function pt(e,t,n){const s=document.createElement("template");s.innerHTML=e;let o=s.content.firstChild;return n&&(o=o.firstChild),o}function je(e,t=window.document){const n=t[xe]||(t[xe]=new Set);for(let s=0,o=e.length;s<o;s++){const r=e[s];n.has(r)||(n.add(r),t.addEventListener(r,xt))}}function Be(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function gt(e,t,n,s){s==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,s)}function mt(e,t,n,s){s?Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n:Array.isArray(n)?e.addEventListener(t,o=>n[0](n[1],o)):e.addEventListener(t,n)}function De(e,t,n={}){const s=Object.keys(t||{}),o=Object.keys(n);let r,l;for(r=0,l=o.length;r<l;r++){const i=o[r];!i||i==="undefined"||t[i]||(Ce(e,i,!1),delete n[i])}for(r=0,l=s.length;r<l;r++){const i=s[r],c=!!t[i];!i||i==="undefined"||n[i]===c||!c||(Ce(e,i,!0),n[i]=c)}return n}function yt(e,t,n={}){const s=e.style;if(t==null||typeof t=="string")return s.cssText=t;typeof n=="string"&&(n={});let o,r;for(r in n)t[r]==null&&s.removeProperty(r),delete n[r];for(r in t)o=t[r],o!==n[r]&&(s.setProperty(r,o),n[r]=o);return n}function Ie(e,t,n,s){typeof t=="function"?j(o=>Ee(e,t(),o,n,s)):Ee(e,t,void 0,n,s)}function _e(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return _(e,t,s,n);j(o=>_(e,t(),o,n),s)}function wt(e,t,n,s,o={}){for(const r in o)if(!(r in t)){if(r==="children")continue;ve(e,r,null,o[r],n)}for(const r in t){if(r==="children"){s||_(e,t.children);continue}const l=t[r];o[r]=ve(e,r,l,o[r],n)}}function bt(e){let t,n;return!g.context||!(t=g.registry.get(n=Ct()))?e.cloneNode(!0):(g.completed&&g.completed.add(t),g.registry.delete(n),t)}function St(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Ce(e,t,n){const s=t.trim().split(/\s+/);for(let o=0,r=s.length;o<r;o++)e.classList.toggle(s[o],n)}function ve(e,t,n,s,o){let r,l,i;if(t==="style")return yt(e,n,s);if(t==="classList")return De(e,n,s);if(n===s)return s;if(t==="ref")n(e);else if(t.slice(0,3)==="on:")e.addEventListener(t.slice(3),n);else if(t.slice(0,10)==="oncapture:")e.addEventListener(t.slice(10),n,!0);else if(t.slice(0,2)==="on"){const c=t.slice(2).toLowerCase(),f=ft.has(c);mt(e,c,n,f),f&&je([c])}else if((i=ct.has(t))||!o&&(Se[t]||(l=lt.has(t)))||(r=e.nodeName.includes("-")))r&&!l&&!i?e[St(t)]=n:e[Se[t]||t]=n;else{const c=o&&t.indexOf(":")>-1&&ht[t.split(":")[0]];c?gt(e,c,t,n):Be(e,ut[t]||t,n)}return n}function xt(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n!==null;){const s=n[t];if(s&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?s(o,e):s(e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function Ee(e,t,n={},s,o){return!o&&"children"in t&&j(()=>n.children=_(e,t.children,n.children)),j(()=>wt(e,t,s,!0,n)),n}function _(e,t,n,s,o){for(g.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const r=typeof t,l=s!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,r==="string"||r==="number"){if(g.context)return n;if(r==="number"&&(t=t.toString()),l){let i=n[0];i&&i.nodeType===3?i.data=t:i=document.createTextNode(t),n=D(e,n,s,i)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||r==="boolean"){if(g.context)return n;n=D(e,n,s)}else{if(r==="function")return j(()=>{let i=t();for(;typeof i=="function";)i=i();n=_(e,i,n,s)}),()=>n;if(Array.isArray(t)){const i=[];if(le(i,t,o))return j(()=>n=_(e,i,n,s,!0)),()=>n;if(g.context){for(let c=0;c<i.length;c++)if(i[c].parentNode)return n=i}if(i.length===0){if(n=D(e,n,s),l)return n}else Array.isArray(n)?n.length===0?Pe(e,i,s):dt(e,n,i):(n&&D(e),Pe(e,i));n=i}else if(t instanceof Node){if(g.context&&t.parentNode)return n=l?[t]:t;if(Array.isArray(n)){if(l)return n=D(e,n,s,t);D(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function le(e,t,n){let s=!1;for(let o=0,r=t.length;o<r;o++){let l=t[o],i;if(l instanceof Node)e.push(l);else if(!(l==null||l===!0||l===!1))if(Array.isArray(l))s=le(e,l)||s;else if((i=typeof l)=="string")e.push(document.createTextNode(l));else if(i==="function")if(n){for(;typeof l=="function";)l=l();s=le(e,Array.isArray(l)?l:[l])||s}else e.push(l),s=!0;else e.push(document.createTextNode(l.toString()))}return s}function Pe(e,t,n){for(let s=0,o=t.length;s<o;s++)e.insertBefore(t[s],n)}function D(e,t,n,s){if(n===void 0)return e.textContent="";const o=s||document.createTextNode("");if(t.length){let r=!1;for(let l=t.length-1;l>=0;l--){const i=t[l];if(o!==i){const c=i.parentNode===e;!r&&!l?c?e.replaceChild(o,i):e.insertBefore(o,n):c&&i.remove()}else r=!0}}else e.insertBefore(o,n);return[o]}function Ct(){const e=g.context;return`${e.id}${e.count++}`}const vt="http://www.w3.org/2000/svg";function Et(e,t=!1){return t?document.createElementNS(vt,e):document.createElement(e)}function Pt(e){const[t,n]=Me(e,["component"]);return $(()=>{const s=t.component;switch(typeof s){case"function":return T(()=>s(n));case"string":const o=at.has(s),r=g.context?bt():Et(s,o);return Ie(r,n,o),r}})}class Lt{isClient=typeof window<"u";session;getEvtState;popStateCbs=[];get href(){return this.isClient?location.href:void 0}get state(){if(!!this.isClient)return history.state}get IntersectionObserver(){if(!!this.isClient)return window.IntersectionObserver}constructor(){!this.isClient||(this.getEvtState=Object.getOwnPropertyDescriptor(PopStateEvent.prototype,"state").get,[History,PopStateEvent].forEach(t=>{const n=Object.getOwnPropertyDescriptor(t.prototype,"state").get;Object.defineProperty(t.prototype,"state",{configurable:!0,enumerable:!0,get(){return n.call(this)?.state},set:void 0})}),["pushState","replaceState"].forEach(t=>{const n=history[t];history[t]=(s,o,r)=>{n.call(history,{session:this.session,state:s},o,r),this.session=void 0}}))}registerSession(t){this.session=t}removeSession(){this.session=void 0}pushState=(t,n,s)=>{!b.isClient||(this.registerSession(n),history.pushState(s,"",t))};replaceState=(t,n,s)=>{!b.isClient||(this.registerSession(n),history.replaceState(s,"",t))};onPopstate=t=>{if(!b.isClient)return;const n=s=>{const r=this.getEvtState.call(s).session;r&&t(r)};window.addEventListener("popstate",n),this.popStateCbs.push([t,n])};unPopState=t=>{if(!b.isClient)return;const n=this.popStateCbs.findIndex(([s])=>s===t);n!==-1&&(window.removeEventListener("popstate",this.popStateCbs[n][1]),this.popStateCbs.splice(n,1))}}const b=new Lt,qe=()=>{},me=(e,t)=>e.reduce((n,s)=>{const{path:o,children:r}=s,l={...s,path:`${t||""}${o}`};return n.push(l),r?n.concat(me(r,l.path)):n},[]),Rt=(e,t)=>{const n=new URL(e.url,t);return n.hash=e.hash??n.hash,e.queryParams&&Object.keys(e.queryParams).forEach(s=>{n.searchParams.set(s,`${e.queryParams[s]}`)}),n},Q=(e,t)=>{const n=new URL(t),s=n.pathname;return n.pathname=`${e||""}${!e||s!=="/"?s:""}`,n},ye=e=>new RegExp(`^${e}(/|$)`),we=(e,t)=>{if(e){const n=ye(e);if(n.test(t.pathname))return t.pathname.replace(n,"/")}return t.pathname},Fe=(e,t)=>{const n={},s=t.split("/"),o=e.split("/");let r=0;for(;r<s.length;r++){const i=s[r];if(i[0]===":"&&(o[r]||i[i.length-1]==="?"))n[i.replace(/^:|\?$/g,"")]=o[r];else{if(i[0]==="*")return n[i.slice(1)]=o.slice(r).join("/"),{match:!0,params:n};if(i!==o[r])return{match:!1,params:{}}}}const l=s.length===o.length;return{match:l,params:l?n:{}}},Ge=(e,t)=>{const n=me([].concat(t));for(let s=0;s<n.length;s++){const o=n[s],{match:r}=Fe(e,o.path);if(r)return o}},ce={},He=$e(),ue=$e(),F=()=>{const e=ae(He);return console.assert(!!e,"Router Hook function or Component must be used within a <Router> component"),e},Ve=()=>{const e=ae(ue);return console.assert(!!e,"Router Hook function or Component must be used within a <Router> component"),e},At=e=>{const t=F().routes();for(let n=0;n<t.length;n++){const s=t[n],o=Ge(typeof e=="function"?e():e,s);if(o)return o}},$t=e=>{let t=Ve();for(;t.parentContext;)t=t.parentContext;for(;t;){const n=t.route();if(!n)return;if(Fe(typeof e=="function"?e():e,n.path).match)return n;t=t.childContext()}},Bt=()=>F().pending,be=()=>{const e=F();return{url:e.url,fullUrl:$(()=>Q(e.base(),e.url())),base:e.base,state:e.state}},kt=(e,t,n)=>{const{url:s,base:o,state:r}=t,l=Rt(n,s());l.pathname=we(o(),l);const i=Q(o(),new URL(l)),c={url:l.toString(),base:o(),state:r()};n.replace?b.replaceState(i,c,n.state):b.pushState(i,c,n.state),O(()=>{e.setUrl(l),e.setState(n.state)})},Nt=(e,t,n,s)=>{const o=t.base();if(n===o)return;const r=new URL(t.url());!o&&n&&ye(n).test(r.pathname)&&(r.pathname=we(n,r));const l=Q(n,r),i={url:r.toString(),base:n,state:void 0};s?b.replaceState(l,i):b.pushState(l,i),O(()=>{e.setUrl(r),e.setBase(n),e.setState(void 0)})},Ke=()=>{const e=be(),t=F();function n(s,o){const r={...typeof s=="string"?{url:s}:s,...o||{}};kt(t,e,r)}return{navigate:n,newBase:(s,o)=>{Nt(t,e,s,o)}}},Ot=e=>()=>{const t=F(),n=Ve(),s=be(),o=Ke(),[r,l]=x();let i;return Ae(()=>{const f=s.url(),u=e.find(h=>Ge(f.pathname,h)!==void 0);if(i?.(),i=void 0,u?.redirectTo)return o.navigate({url:u.redirectTo,replace:!0});const w=h=>{h?(u&&!ce[u.path]&&u.component?.preload&&(t.setPending(!0),u?.component?.preload().catch(qe).finally(()=>{ce[u.path]=!0,t.setPending(!1)})),O(()=>{n.setRoute(u),l(()=>u?.component)})):O(()=>{n.setRoute(void 0),l(void 0)})},y=(u?.canLoad||(()=>!0))(s,u);y instanceof Promise?y.catch(h=>(console.error(h),!1)).then(w):w(y)}),K(rt,{fallback:(f,u)=>(console.error(f),i=u,[]),get children(){return K(Pt,{get component(){return r()}})}})},Dt=e=>{const t=[].concat(e);return F().setRoutes(t),setTimeout(()=>{me(t).forEach(s=>{const o=s.component;s.prefetch&&o?.preload&&o.preload().catch(qe).finally(()=>{ce[s.path]=!0})})},0),Ot(t)},Tt=e=>{const t=ae(ue),[n,s]=x(),[o,r]=x(),l={parentContext:t,route:o,setRoute:r,childContext:n,setChildContext:s};return t?.setChildContext(l),W(()=>{t?.setChildContext(void 0)}),K(ue.Provider,{value:l,get children(){return e.children}})},It=e=>{console.assert(b.isClient||!b.isClient&&!!e.url,"Router must be initialized with a url in server mode");const[t,n]=x([]),[s,o]=x(!1),[r,l]=x(e.defaultBase??""),[i,c]=x(b.state),f=new URL(e.url?e.url:b.href);r()&&ye(r()).test(f.pathname)&&(f.pathname=we(r(),f));const[u,w]=x(f),y=h=>{h&&O(()=>{w(new URL(h.url)),l(h.base),c(h.state)})};return b.onPopstate(y),W(()=>{b.unPopState(y),b.removeSession()}),b.replaceState(Q(r(),f),{url:u().toString(),base:r(),state:i()},i()),K(He.Provider,{value:{routes:t,setRoutes:n,pending:s,setPending:o,base:r,setBase:l,url:u,setUrl:w,state:i,setState:c},get children(){return K(Tt,{get children(){return e.children}})}})},Ut=pt("<a></a>"),_t=e=>{const t=ot({prefetch:"visible"},e),[n,s]=Me(t,["state","replace","queryParams","activeClass","prefetch"]),o=Ke(),r=be();let l;const i=$(()=>new URL(s.href??"",r.url())),c=$(()=>n.activeClass?{[n.activeClass]:!!$t(i().pathname),...s.classList||{}}:{...s.classList||{}}),f=$(()=>{const p=Q(r.base(),i()),a=n.queryParams;return a&&Object.keys(a).forEach(A=>{p.searchParams.set(A,a[A])}),p.href.replace(p.origin,"")}),u=p=>{const{onClick:a}=s;typeof a=="function"?a(p):a&&a[0]&&typeof a[0]=="function"&&a[0](a[1],p),s.target!=="_blank"&&(p.preventDefault(),o.navigate({url:i(),state:n.state,replace:n.replace,queryParams:n.queryParams}))},w=p=>{s.ref&&typeof s.ref=="function"?s.ref(p):s.ref&&(s.ref=p),l=p},y=p=>{p.preload().catch(()=>{})};let h;const E=()=>{h&&(l?.removeEventListener("mouseenter",h),h=void 0)};let R;const k=()=>{R&&(R.disconnect(),R=void 0)};return Ae(()=>{if(!b.isClient)return;n.prefetch!=="visible"&&k();const a=At(i().pathname)?.component;!a?.preload||(n.prefetch==="hover"&&l?(E(),h=()=>{y(a)},l.addEventListener("mouseenter",h)):n.prefetch==="immediate"?y(a):n.prefetch==="visible"&&l&&!R&&(R=new b.IntersectionObserver(A=>{A.forEach(M=>{M.target===l&&M.isIntersecting&&(y(a),k())})}),R.observe(l)))}),W(()=>{k(),E()}),(()=>{const p=Ut.cloneNode(!0);return p.$$click=u,w(p),Ie(p,s,!1,!0),_e(p,()=>e.children),j(a=>{const A=f(),M=c();return A!==a._v$&&Be(p,"href",a._v$=A),a._v$2=De(p,M,a._v$2),a},{_v$:void 0,_v$2:void 0}),p})()};je(["click"]);export{_t as L,It as R,Ke as a,Dt as b,K as c,je as d,Bt as e,j as f,x as g,_e as i,Mt as l,jt as r,Be as s,pt as t,be as u};
